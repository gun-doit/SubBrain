## 메모리

### 1. 컴퓨터 메모리

컴퓨터의 물리적 메모리는 시스템에서 실행되는 모든 프로세스가 공유한다.

1.1 가상 주소 공간

프로그래머가 보게 되는 가상 주소 공간 내의 메모리 주소는 OS와 프로세서의 일부인 **메모리 관리자( MMU : Memory Management Unit )** 에 의해 물리적 메모리 주소와 매핑된다. 이러한 매핑이나 변환은 ==메모리에 접근할 때마다== 발생한다.

  

1.2 메모리 페이지

1. 메모리 페이지 : 가상 메모리를 구현하는 가장 일반적인 방법 **메모리 페이지**라고 부르는 고정된 크기의 블록으로 주소 공간을 나누는 것.
2. 페이지 폴트( page fault ) : 메모리 페이지가 주 메모리에 매핑되어 있지 않은 경우 발생하는 하드웨어 예외
3. 페이징 : 주 메모리에 더 이상 쓸 수 있는 페이지 프레임이 없으면 정리를 해야함 → 이 때 정리될 페이지가 사용된 것이라면, 즉 디스크에서 로드된 이후 수정된 적이 있다면 바꾸기 전에 디스크에 기록해야함. 이 과정을 페이징이라고 한다.

1.3 스레싱 ( thrashing )

물리적 메모리가 넉넉하지 못한 상태에서 발생하므로 지속적인 페이징을 야기함.

  

### 2. 프로세스 메모리

**스택, 힙** 은 C++ 프로그램 메모리 세그먼트에 가장 중요한 두 가지 요소.

- 스택스택은 지역 변수가 위치하는 곳이며, 함수의 인수도 포함된다.함수가 호출될 때마다 증가하고 함수가 반환되면 감소한다.각각의 스레드는 자신만의 스택을 가지고 있으므로 스택 메모리는 스레드 안전을 지원한다.
- 힙힙은 전역 메모리 영역이고, 프로세스 내의 모든 스레드가 공유한다.new를 사용해 메모리를 할당할 때마다 커지고, delete를 사용해 메모리를 해제할 때 감소한다.

보통 힙은 작은 수의 주소에서 시작해서 위로 증가하며, 스택은 큰 수![[Untitled 48.png|Untitled 48.png]][/Untitled 48.png|Untitled 48.png]]

### 2.1 스택 메모리

- 연속적인 메모리 블록이다.
- 고정된 최대 크기를 가진다.
- 절대로 조각나지 않는다.
- 프로그램의 개별 스레드는 자신만의 스택을 가진다.

  

### 2.2 힙 메모리

동적 저장소가 실제 의미에 더 가깝고, 데이터가 동적으로 위치하는 공간.

  

### [세그먼트란?](https://lowsec.tistory.com/2)

- **“프로그램에 의해 정의된 특정 영역”** 으로 코드, 데이터, 그리고 스택(stack)으로 알려져 있는 것을 포함한다. 한 세그먼트는 패러그래프 경계, 즉 16 또는 hex 10으로 나누어지는 위치에서 시작한다. 세그먼트는 메모리의 거의 어느 곳에나 위치할 수 있고, 실제 모드에서 최대 64KB까지의 크기가 가능하지만, 프로그램이 실행을 위해 필요한 공간 - 데이터와 그 데이터를 처리하는 명령어들을 위한- 이면 된다.
- 명령어가 세그먼트 레지스터에 세그먼트 주소를 적재할 때, 가장 오른쪽에 위치한 네 개의 0비트가 자동으로 오른쪽으로 이동하면서 제거된다.

  

  

  

  

---

1) [메모리 영역](https://whitesoil.tistory.com/99)

2) [데이터 세그먼트](https://campkim.tistory.com/23)

3) [레지스터](https://velog.io/@marshmellos/CS-Register%EC%9D%98-%EC%A2%85%EB%A5%98)